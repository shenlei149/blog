---
title: 欧拉项目-613题-毕达哥拉斯蚂蚁
date: 2018-10-27 09:33:02
tags: [欧拉项目, Project Euler]
categories: 数学
---
[613题链接](https://projecteuler.net/problem=613 "Problem 613 - Project Euler")

题目是毕达哥拉斯蚂蚁，用我们的说法是勾股蚂蚁。  
题目大概是说，有个小蚂蚁落到了一个宽30cm，长40cm的直角三角形上，它会随机的选择一个方向爬，问从斜边爬出去的概率是多少。

![](/images/ProjectEuler-613-A.png)  
上图是一个示意图，x轴的长度是4，y轴长度是3。把题目的30，40缩放为3，4，对求概率是没有影响的。  
假设落到点P(x, y)，那么它从斜边爬出去的概率是多少呢？  
角PAC的大小是`arctan(x/(3-y))`，角PBC的大小是`arctan(y/(4-x))`，那么角APB的大小是`PI/2+arctan(x/(3-y))+arctan(y/(4-x))`，那么从点P开始从斜边爬出去的概率就是`PI/2+arctan(x/(3-y))+arctan(y/(4-x)) / (2*PI)`。对三角形中的每一点计算概率然后除以三角形面积就是要求的概率了。  

`1 / 12 * PI * (integrate PI/2+arctan(x/(3-y))+arctan(y/(4-x)) dy dx, x=0..4, y=0..-3*x/4+3)`

`PI/2`是常量，可以很容易计算出来，公式化简为

`1 / 12 * PI * (3 * PI + (integrate arctan(x/(3-y))+arctan(y/(4-x)) dy dx, x=0..4, y=0..-3*x/4+3))`

两个反正切，我不会算。。。借助了一下[wolframalphal](https://www.wolframalpha.com/input/?i=integrate+arctan(x%2F(3-y))%2Barctan(y%2F(4-x))+dy+dx,+x%3D0..4,+y%3D0..-3*x%2F4%2B3)
![](/images/ProjectEuler-613-B.png)  
有了解析解之后，继续化简公式  

`1 / 12 * PI * (3 * PI + 3 * PI + ln((3^4*2^16*sqrt(3/5))/(5^12)))`

`1/2 + PI/12*ln((3^4*4^8*sqrt(3/5))/(5^12))`

上式包含了3，4，5，同时分子和分母幂次相同，3的4次方乘以4的8次方，分母是5的12次方，是不是很神奇哈哈。其实想想就知道结果和3，4，5是相关的。

有了解析式，计算出答案也就很容易了。
