<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="zQPDvt_a5mVoBX5SrOvohtgGBUHrwI2PZDck7uTXa_w">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://guozi149.me').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
<meta property="og:type" content="website">
<meta property="og:title" content="guozi">
<meta property="og:url" content="http://guozi149.me/page/10/index.html">
<meta property="og:site_name" content="guozi">
<meta property="og:description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Leo SHEN">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://guozi149.me/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>guozi</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-37751416-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-37751416-1');
      }
    </script>


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?fd84cd65db62dc79ad1a7f36217ce10d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">guozi</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">一点一点前进...</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E7%BE%8E%E4%B8%BD%E6%96%B0%E4%B8%96%E7%95%8C-%E8%AF%BB%E4%B9%A6%E5%BF%83%E5%BE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E7%BE%8E%E4%B8%BD%E6%96%B0%E4%B8%96%E7%95%8C-%E8%AF%BB%E4%B9%A6%E5%BF%83%E5%BE%97/" class="post-title-link" itemprop="url">美丽新世界 | 读书心得</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-10-04 11:40:22" itemprop="dateCreated datePublished" datetime="2015-10-04T11:40:22+08:00">2015-10-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%98%85%E8%AF%BB/" itemprop="url" rel="index">
                    <span itemprop="name">阅读</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/" itemprop="url" rel="index">
                    <span itemprop="name">心得</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E7%BE%8E%E4%B8%BD%E6%96%B0%E4%B8%96%E7%95%8C-%E8%AF%BB%E4%B9%A6%E5%BF%83%E5%BE%97/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="阅读/心得/美丽新世界-读书心得/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以下内容摘自《娱乐至死》：<br>乔治·奥威尔写了《1984》，阿道斯·赫胥黎写了《美丽新世界》<br>奥威尔所担心的，是书籍将被禁止流传；<br>赫胥黎所担心的，是书籍根本不用被禁止，因为人们将自发的不再读书；<br>奥威尔所担心的，有人将剥夺我们获取信息的权利；<br>赫胥黎所担心的，有人将给予我们太多信息，使我们只会被动接受、无法自拔；<br>奥威尔所担心的，真相将被隐瞒；<br>赫胥黎所担心的，真相将被无关的汪洋所淹没；<br>奥威尔所担心的，我们的文化将被禁锢，成为一片荒漠；<br>赫胥黎所担心的，我们的文化将因琐碎的杂草丛生，大众为微不足道的事情而痴迷。</p>
<p>《1984》中，政府用制造痛苦的方法来支配大众；<br>《美丽新世界》中，政府用制造娱乐的方法来支配大众。<br>在奥威尔看来，人类将毁于自己所憎恨的东西；<br>而赫胥黎认为，人类将毁于自己所迷恋的东西。</p>
<p>下面就随便写写看完书之后的感想，想法，观点。</p>
<p>这两个不同的世界，在今天看来也很有意思，有的国家像1984里面描绘的，有的国家像美丽新世界里面描绘的。在我看来，显然后者更可怕，大众在不知不觉之中失去了自我却丝毫不知。而我们目前所处的世界，更像是后者，或者说，在一步步的向后者逼近。</p>
<p>什么是自由？保持独立的思考。不管在什么样的世界，保持独立的思考都是第一位的。</p>
<p>美丽新世界否定了人自由的意志，一切思想都是被设定的。</p>
<p>站在1984和美丽新世界之外去读这两本书，人们可能会无法接受活在1984，但是，我觉得很多人可能会在不知不觉中接受美丽新世界，因为那个世界看起来没什么不好的。在那里，物质极大丰富，犹如描写中的共产主义社会。不过那个世界依然有特权，统治阶级能做任何想做的事情。人们从出生就被分成了三六九等，α是高等的，做着让β们觉得优越的事情，不过什么阶层，吃一颗唆麻就能体会幸福了。</p>
<p>吸食唆麻，就是在那个世界逃避一切的方式，还能体会到幸福。人们真心是娱乐至死，不去思考，不去想任何除了被设定以外的事情。野蛮人的妈妈天天做着培养相关的工作，但是不知道什么是化学试剂，读的书也就只有守则、操作指南这类玩意。只要做了分配的工作，就能得到任意想要的东西，还能有唆麻让人幸福，人们为什么要去思考呢。活着就是为了去娱乐，野蛮人的愤怒就是大家娱乐的点。这和我们的世界很像了，大多人刷微博、刷朋友圈，在消费着他人的故事；很多人每天除了工作来解决温饱问题之后，除了娱乐，其实也没有做什么有用的事情，毕竟，不管在现实世界，还是美丽新世界，像那个自愿到小岛上写作的α主动去寻找更高的追求的人，永远都只是一小撮人。</p>
<p>构建了美丽新世界，统治阶级让人们活在幸福之中，不主动思考来达到一个和谐、稳定的社会，不知道比1984高到哪里去。当然，两个作者都有着深邃的思想，写出不同的社会，不同的东西，完全是由当时所在的环境决定的，这里，我绝对没有贬低奥威尔的意思。</p>
<p>伯纳，一个可怜的α，个头比正常的α小，没有得到应有的尊敬。他对美丽新世界的抵抗，只是因为自己想得到关注罢了，和那个自愿去小岛上写作的α有着本质的差别，当他因为野蛮人得到应有的尊敬和礼遇之后，也开始维护这个美丽新世界了。现实生活里面，这种人也是很多很多的。</p>
<p>两本书有个共性，就是屏蔽了过去，屏蔽了历史，印证了那句话：掌握了现在的人，掌握了历史。历史，不仅仅是为了研究过去，更为了满足现在，谋划未来。古今中外的执政者，无一例外。</p>
<p>阶层固化问题。美丽新世界，阶级在出生就被设定了。在那里，人们完全没有进取的动机啊，不管日子过得怎么样，吸食一下唆麻，爽反了，谁还去管什么阶级不阶级呢？他们压根就没有这个意识，同时，媒介取代了信息，人们不需要去思考，给什么就接受什么，没有理解力，也就不会去思考去理解阶层问题。现实社会，虽然阶层固化也越来越严重，但是，人们还是有进取的想法，对阶层还是有自己的看法的，阶层流动还是存在的。不过基于媒介的干涉，娱乐的低层次，人们慢慢地也不关心这个问题了，这真是一个问题。</p>
<p>人们会反抗1984，因为那个世界里面的东西是我们讨厌的，但是人们不一定会反抗美丽新世界，因为那个世界里面的东西是我们喜欢的。这也就是为什么，有人写了些所谓的指南，让大家警惕起来，不要走向美丽新世界。</p>
<p>随便写写，到此为止。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE-346%E9%A2%98-%E5%BC%BA%E5%BE%AA%E7%8E%AF%E6%95%B4%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE-346%E9%A2%98-%E5%BC%BA%E5%BE%AA%E7%8E%AF%E6%95%B4%E6%95%B0/" class="post-title-link" itemprop="url">欧拉项目 | 346题 | 强循环整数</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-10-02 11:22:54" itemprop="dateCreated datePublished" datetime="2015-10-02T11:22:54+08:00">2015-10-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%A6/" itemprop="url" rel="index">
                    <span itemprop="name">数学</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index">
                    <span itemprop="name">欧拉项目</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE-346%E9%A2%98-%E5%BC%BA%E5%BE%AA%E7%8E%AF%E6%95%B4%E6%95%B0/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="数学/欧拉项目/欧拉项目-346题-强循环整数/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://projecteuler.net/problem=346" title="Problem 346 - Project Euler">题目链接</a></p>
<p>7有一个特殊的性质，以2为基底是111，以6为基底是11。也就是说，基底b &gt; 1的情况下，整数n能够至少写成两个基底的循环整数。我们称这种整数位Strong Repunits，强循环整数。50以内，{1,7,13,15,21,31,40,43}这些都是满足该性质的。<br>题目为了检验你的算法，给出了1000以内强循环整数的和是15864。<br>求，10 ^ 12以内的强循环整数之和。</p>
<p>想知道一个整数是不是强循环整数比较难，反过来，我们构造强循环整数比较容易。<br>首先，任何一个数m，都可以循环整数的形式11，其基底是m-1。<br>那么我们从基底b = 2开始，1的个数从n = 3开始，开始构造循环整数，这样的循环整数一定是强循环整数，因为有一个基底是m-1的11。  </p>
<p>首先贴出代码，再来解释一些小策略和我踩过的坑。  </p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> repunits = <span class="keyword">new</span> List&lt;<span class="built_in">long</span>&gt;();</span><br><span class="line"><span class="keyword">var</span> MAX = Utils.Pow(<span class="number">10</span>, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">int</span> n = <span class="number">3</span>; <span class="comment">// count of 1</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">long</span> sum = (<span class="built_in">long</span>)((Utils.Pow(b, n) - <span class="number">1</span>) / (b - <span class="number">1</span>));</span><br><span class="line">        <span class="keyword">if</span> (sum &gt;= MAX)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        repunits.Add(sum);</span><br><span class="line">        n++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">3</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    b++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> repunits.Distinct().Sum() + <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>第一个小问题，if n == 3那个判断，就是说，以b为基底的数111已经比10 ^ 12还大了，计算可以停止了。<br>第二个小问题，最后求和之前要调用Distinct()函数，因为会存在一些数，即能写成以b1为基底，n1个1，也可以写成以b2为基底，n2个1，那么这个数往List里面插入了两次，当然，repunits用Set就不存在这个问题了。<br>第三个小问题，求以b为基底，n个1的数的大小，不用每个1挨着求多少次方再加起来，使用等比数列的求和公式，直接算答案比较省事。</p>
<p>最后，说我踩得一个坑，注意，求b的n次方的那个函数，我使用了Utils.Pow(b, n)，我使用二分法自己实现了一个简单的Pow函数。因为C#自带的参数是double，求值的时候会有精度损失，特别是b的n次方很大的时候，可能会少一点点或者多一点点，一旦强转成long的话，会多一或者少一，导致结果不正确。<br>开始的时候，计算了1000以内强循环整数的和，和题目给的一样，但是算10 ^ 12以内的值时，答案就不对了，想了半天，debug了一会，才发现是精度问题。于是乎，自己实现了一个，返回值是BigInteger，代码写得稍微啰嗦了点，但是很好的表现了二分法的内涵，哈哈。  </p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> BigInteger <span class="title">Pow</span>(<span class="params"><span class="built_in">int</span> b, <span class="built_in">int</span> n</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> half = Pow(b, n / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> half * half;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> half * half * b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme-%E5%AE%9E%E7%8E%B0map/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme-%E5%AE%9E%E7%8E%B0map/" class="post-title-link" itemprop="url">Scheme: 实现map</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-09-06 11:12:54" itemprop="dateCreated datePublished" datetime="2015-09-06T11:12:54+08:00">2015-09-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" itemprop="url" rel="index">
                    <span itemprop="name">计算机</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index">
                    <span itemprop="name">函数式编程</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme-%E5%AE%9E%E7%8E%B0map/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="计算机/函数式编程/Scheme-实现map/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>map操作本身就不多介绍了，直奔主题。</p>
<p>首先，我们实现一个一元的map，也就是说，传给map的函数只接受一个参数。</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">unary-map</span> fn seq)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">null?</span></span> seq) &#x27;()</span><br><span class="line">      (<span class="name"><span class="builtin-name">cons</span></span> (<span class="name">fn</span> (<span class="name"><span class="builtin-name">car</span></span> seq))</span><br><span class="line">            (<span class="name">unary-map</span> fn (<span class="name"><span class="builtin-name">cdr</span></span> seq)))))</span><br></pre></td></tr></table></figure>
<p>很简单，就是一个简单的递归即可，就不详细的说了。我们举一个例子：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; (<span class="name">unary-map</span> (<span class="name"><span class="builtin-name">lambda</span></span> (x) (<span class="name"><span class="builtin-name">+</span></span> x <span class="number">1</span>)) &#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>))</span><br><span class="line">&#x27;(<span class="number">2</span> <span class="number">3</span> <span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<p>在继续讲解之前，我们需要知道一些其他知识。Scheme内置的map可以处理任意多的参数，显然，我们需要知道如何定义任意参数的函数。<br>Scheme使用.来表示把后面的参数打包起来。<br>举个简单的例子说明（需要强调下，小点和字母d之间有一个空格）：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">bar</span> a b c . d)</span><br><span class="line">  (<span class="name"><span class="builtin-name">list</span></span> a b c d))</span><br><span class="line"></span><br><span class="line">&gt; (<span class="name">bar</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>)</span><br><span class="line">&#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> (<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>))</span><br><span class="line">&gt; (<span class="name">bar</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>)</span><br><span class="line">&#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> ())</span><br></pre></td></tr></table></figure>

<p>下面考虑实现自己的map函数了。<br>思路其实也很简单，把每一个list里面的第一个元素拿出来传入fn让其运算，然后呢，把每一个list里面的第一个元素删除，得到一系列的list，然后递归调用。<br>说起来容易，如何设计参数呢？<br>第一个参数是一个list，第二个参数是.，也就是可变参数，把后面的所有list打包传进来。<br>拿第一个list的第一个元素简单，如何把后面每个list的第一个元素取出呢？利用先开始写的一元map，(unary-map car other-list)，就得到其余list的第一个元素，和第一个list的第一个元素连接起来，传给fn去做计算。<br>后续的移除第一个元素之后递归也是类似的。<br>最后把结果连接成一个list。</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">my-map</span> fn first-list . other-list)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">null?</span></span> first-list) &#x27;()</span><br><span class="line">      (<span class="name"><span class="builtin-name">cons</span></span> (<span class="name"><span class="builtin-name">apply</span></span> fn</span><br><span class="line">                   (<span class="name"><span class="builtin-name">cons</span></span> (<span class="name"><span class="builtin-name">car</span></span> first-list)</span><br><span class="line">                         (<span class="name">unary-map</span> car other-list)))</span><br><span class="line">            (<span class="name"><span class="builtin-name">apply</span></span> my-map</span><br><span class="line">                   (<span class="name"><span class="builtin-name">cons</span></span> fn</span><br><span class="line">                         (<span class="name"><span class="builtin-name">cons</span></span> (<span class="name"><span class="builtin-name">cdr</span></span> first-list)</span><br><span class="line">                               (<span class="name">unary-map</span> cdr other-list)))))))</span><br></pre></td></tr></table></figure>

<p>简单的写两个case测试一下：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; (<span class="name">my-map</span> + &#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>) &#x27;(<span class="number">4</span> <span class="number">5</span> <span class="number">6</span>) &#x27;(<span class="number">7</span> <span class="number">8</span> <span class="number">9</span>))</span><br><span class="line">&#x27;(<span class="number">12</span> <span class="number">15</span> <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">&gt; (<span class="name">my-map</span> (<span class="name"><span class="builtin-name">lambda</span></span> (x) (<span class="name"><span class="builtin-name">+</span></span> x <span class="number">1</span>)) &#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>))</span><br><span class="line">&#x27;(<span class="number">2</span> <span class="number">3</span> <span class="number">4</span>)</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE-347%E9%A2%98-%E8%83%BD%E8%A2%AB%E4%B8%A4%E4%B8%AA%E8%B4%A8%E6%95%B0%E6%95%B4%E9%99%A4%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B4%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE-347%E9%A2%98-%E8%83%BD%E8%A2%AB%E4%B8%A4%E4%B8%AA%E8%B4%A8%E6%95%B0%E6%95%B4%E9%99%A4%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B4%E6%95%B0/" class="post-title-link" itemprop="url">欧拉项目 | 347题 | 能被两个质数整除的最大整数</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-08-28 10:25:05" itemprop="dateCreated datePublished" datetime="2015-08-28T10:25:05+08:00">2015-08-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%A6/" itemprop="url" rel="index">
                    <span itemprop="name">数学</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE/" itemprop="url" rel="index">
                    <span itemprop="name">欧拉项目</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E6%95%B0%E5%AD%A6/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE/%E6%AC%A7%E6%8B%89%E9%A1%B9%E7%9B%AE-347%E9%A2%98-%E8%83%BD%E8%A2%AB%E4%B8%A4%E4%B8%AA%E8%B4%A8%E6%95%B0%E6%95%B4%E9%99%A4%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B4%E6%95%B0/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="数学/欧拉项目/欧拉项目-347题-能被两个质数整除的最大整数/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://projecteuler.net/problem=347" title="Problem 347 - Project Euler">原题链接</a></p>
<p>在所有小于100的整数中，能被两个质数整除的最大整数是96，96 = 2^5 * 3。我们定义函数M(p,q,N)：对于不同的两个质数p和q，M(p,q,N)是小于等于N中能被p和q整除的最大整数，如果不存在，M(p,q,N)=0<br>比如<br>M(2,3,100)=96<br>M(3,5,100)=75，而不是90，因为90能被2，3，5整除。<br>M(2,73,100)=0，因为2*73=146，小于100的数里面没有数能同时被2和73整除。</p>
<p>S(N)是对所有不同的M(p,q,N)求和。<br>题目最后要求是求S(10 000 000)。</p>
<p>解题思路很清晰，只是要尽可能早的排除不可能的质数组合。<br>首先获取0到5 000 000之间的质数，因为大于5 000 000的质数乘以最小的质数2也会大于10 000 000，M是0，不用考虑了。<br>然后就是组合每一个可能的指数对p和q，获得M(p,q,10 000 000)。<br>两层循环遍历p和q。<br>不妨设p比较小，用遍历所有的质数吗？显然不用，当p大于10 000 000的平方时，p和q的乘积就会大于10 000 000，M是0。<br>q也不用遍历所有大于p的质数，一旦p和q的乘积大于10 000 000，就可以停止了。<br>有了p，q，得到对应的M，然后放到一个List里面。<br>循环遍历完之后就可以把List里面的值求和。</p>
<p>给定p和q，如何得到M呢？<br>我用了暴力法，就是先通过Log(p, 10 000 000)和Log(q, 10 000 000)计算出可能的最大指数，然后两层循环，遍历所有可能的情况，得到小于等于M且能被2个质数整除的最大值。</p>
<p>在我的机器上，大约2s多一点就能得到结果了。<br>最后，贴一下我的代码：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">int</span> MAX = <span class="number">10000000</span>;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">long</span> <span class="title">GetAnswer</span>(<span class="params"></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">var</span> Ms = <span class="keyword">new</span> List&lt;<span class="built_in">long</span>&gt;();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> primes = Utils.GenPrimes(MAX / <span class="number">2</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; primes[i] &lt; Math.Sqrt(MAX); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="built_in">int</span> j = i + <span class="number">1</span>; j &lt; primes.Length; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">long</span> p = primes[i];</span><br><span class="line">			<span class="built_in">long</span> q = primes[j];</span><br><span class="line">			<span class="keyword">if</span> (p * q &lt; MAX)</span><br><span class="line">			&#123;</span><br><span class="line">				Ms.Add(GetM(p, q));</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> Ms.Sum();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="built_in">long</span> <span class="title">GetM</span>(<span class="params"><span class="built_in">long</span> p, <span class="built_in">long</span> q</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">var</span> max = <span class="number">0L</span>;</span><br><span class="line">	<span class="keyword">var</span> e1Max = (<span class="built_in">int</span>)(Math.Log(MAX) / Math.Log(p));</span><br><span class="line">	<span class="keyword">var</span> e2Max = (<span class="built_in">int</span>)(Math.Log(MAX) / Math.Log(q));</span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">int</span> e1 = <span class="number">0</span>; e1 &lt; e1Max; e1++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="built_in">int</span> e2 = <span class="number">0</span>; e2 &lt; e2Max; e2++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">var</span> product = Math.Pow(p, e1 + <span class="number">1</span>) * Math.Pow(q, e2 + <span class="number">1</span>);</span><br><span class="line">			<span class="keyword">if</span> (product &lt;= MAX &amp;&amp; product &gt; max)</span><br><span class="line">			&#123;</span><br><span class="line">				max = (<span class="built_in">long</span>)product;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/C-%E4%B8%ADvector%E7%9A%84%E5%A2%9E%E9%95%BF%E5%9B%A0%E5%AD%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/C-%E4%B8%ADvector%E7%9A%84%E5%A2%9E%E9%95%BF%E5%9B%A0%E5%AD%90/" class="post-title-link" itemprop="url">C++中vector的增长因子</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-08-24 17:26:09" itemprop="dateCreated datePublished" datetime="2015-08-24T17:26:09+08:00">2015-08-24</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" itemprop="url" rel="index">
                    <span itemprop="name">计算机</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index">
                    <span itemprop="name">计算机基础</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/C-%E4%B8%ADvector%E7%9A%84%E5%A2%9E%E9%95%BF%E5%9B%A0%E5%AD%90/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="计算机/计算机基础/C-中vector的增长因子/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>我们都知道C++的<code>vector</code>的容量会随着添加的元素而自动增长，但是每次增长多少呢？原来的两倍？三倍？还是多少？下面，让我们来研究下增长因子是如何确定的。</p>
<p>首先，要阐述一个<code>vector</code>实现相关的事实：<br><code>vector</code>使用<code>allocator</code>，而不是<code>realloc</code>，所以，不管你增长因子是多少，必然需要重新<code>copy-cons</code>(或<code>move-cons</code>)一遍。</p>
<p>废话不多讲了，下面进入正题。<br>假设，我们用了一个<code>vector</code>，其占用内存为M，内存布局如下图所示：</p>
<table>
<tr>
<td>Free</td><td style="width:100px">M</td><td>Free</td>
</tr>
</table>

<p>我们一直使用这个<code>vector</code>，当元素太多导致内存不够的时候，要重新给这个<code>vector</code>分配内存，新分配的内存大小为f * M。<br>首先，要先分配f * M的空间，注意，这个时候M那块内存还没有释放掉：  </p>
<table>
<tr>
<td>Free</td><td style="width:100px">M</td><td style="width:150px">f * M</td><td>Free</td>
</tr>
</table>

<p>然后把之前的M空间释放掉：  </p>
<table>
<tr>
<td>Free</td><td style="width:100px">Free(M)</td><td style="width:150px">f * M</td><td>Free</td>
</tr>
</table>

<p>我们继续使用这个<code>vector</code>，内存又不够了，再次分配的内存大小为f * f * M。<br>和上面类似，分配内存时：</p>
<table>
<tr>
<td>Free</td><td style="width:100px">Free(M)</td><td style="width:150px">f * M</td><td style="width:225px">f * f * M</td><td>Free</td>
</tr>
</table>
然后释放掉前一块地址：    
<table>
<tr>
<td>Free</td><td style="width:100px">Free(M)</td><td style="width:150px">Free(f * M)</td><td style="width:225px">f * f * M</td><td>Free</td>
</tr>
</table>

<p>以此类推，第n次重新分配内存时，需要新分配f ^ n * M大小的内存，内存分布如下所示(带括号说明已经释放了)：  </p>
<table>
<tr>
<td>Free</td><td style="width:50px">(M)</td><td style="width:70px">(f * M)</td><td style="width:70px">(...)</td><td style="width:120px">f ^ (n-1) * M</td><td style="width:130px">f ^ n * M</td><td>Free</td>
</tr>
</table>
然后再把之前的f ^ (n-1) * M大小的内存回收:  
<table>
<tr>
<td>Free</td><td style="width:50px">(M)</td><td style="width:70px">(f * M)</td><td style="width:70px">(...)</td><td style="width:120px">(f^(n-1) * M)</td><td style="width:130px">f ^ n * M</td><td>Free</td>
</tr>
</table>

<p>我们思考这样一个问题：如果当第n次进行内存扩展时，前面n-2次操作释放的内存（包括第n-2次的内存和最开始占用的内存M）之和大于第n次所需要的内存，那么内存分配器就可以用之前留下来的内存而不用再往后去寻找Free的块。按照这个想法得到的内存分布如下：  </p>
<table>
<tr>
<td>Free</td><td style="width:150px">f ^ n * M</td><td style="width:70px">(GAP)</td><td style="width:130px">(f ^ (n-1) * M)</td><td>Free</td>
</tr>
</table>

<p>这样做的好处有两个，一是可以提高内存分配器的效率，更重要的是，<strong>内存的使用更加紧凑，局部性更好，能够更好的利用缓存机制</strong>。</p>
<p>上述想法包含一个约束条件，即下面的不等式（两边已同除了M）：<br>f^n &lt;= 1 + f + f^2 + … + f^(n-2)<br>当f=1.5时，n最小为5，也就是说，第五次进行内存扩展的时候，可以利用前面释放的内存。<br>当f=2时，2^n &lt;= 2^(n-1) -1，不等式永假，也就是说，<code>vector</code>再也不能利用之前释放的内存。  </p>
<p>从不等式可以得到，f越小，能满足不等式的n也会随之减小，但是如果f很小，会频繁的遇到内存不足进行扩展的情况，也就是说，会经常性的<code>copy-cons</code>或者<code>move-cons</code> <code>vector</code>里面的元素，得不偿失。而且5也足够小了，所以1.5是一个不错的选择。</p>
<p>读到这里，可能很多人会说，内存分配器是按照First-Fit来进行内存分配的吗？你怎么能假设“内存管理器就可以用之前留下来的内存而不用再往后去寻找Free的块”呢？而且，你这示例图都是连续的内存，实际情况未必如此啊。其实现代内存分配器很复杂，可能会把内存先分成若干块，每一块接受不同大小的内存分配，比如第一块都是内存需求量小于64B的，第二块都是内存需求量64B至128B，第三块都是需求量128B-1KB的等等；同时每一块又可能有不同的分配回收机制。所以实际情况远比我们想象的复杂，想要真实性能，做性能测试才是靠谱的途径。</p>
<p>排除这些外界因素，仅从本文分析的角度看来，增长因子1.5是个不错的选择，比2要好，因为使用2永远不会利用到之前释放的内存。</p>
<p>Facebook利用上述分析的原理（增长因子是1.5），配合jemalloc，开发了一套<code>fbVector</code>（已开源），性能比GCC的要好。<br>Microsoft的VC++ STL中的<code>vector</code>实现，增长因子也是1.5以获取更好的性能。<br>而GCC和CLang还停留在古老的增长因子为2的阶段。</p>
<p>下面这段小程序，能够帮你测试出当前实现的增长因子：  </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	std::vector&lt;<span class="keyword">int</span>&gt; arr;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		arr.<span class="built_in">push_back</span>(i \* i);</span><br><span class="line">		std::cout &lt;&lt;</span><br><span class="line">			<span class="string">&quot;Size: &quot;</span> &lt;&lt; arr.<span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;; &quot;</span> &lt;&lt;</span><br><span class="line">			<span class="string">&quot;Capacity: &quot;</span> &lt;&lt; arr.<span class="built_in">capacity</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme-%E4%BD%BF%E7%94%A8Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%8E%92%E5%88%97%E5%92%8C%E7%BB%84%E5%90%88%E7%AE%97%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme-%E4%BD%BF%E7%94%A8Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%8E%92%E5%88%97%E5%92%8C%E7%BB%84%E5%90%88%E7%AE%97%E6%B3%95/" class="post-title-link" itemprop="url">Scheme: 使用Lambda表达式实现排列和组合算法</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-08-11 17:20:54" itemprop="dateCreated datePublished" datetime="2015-08-11T17:20:54+08:00">2015-08-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" itemprop="url" rel="index">
                    <span itemprop="name">计算机</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index">
                    <span itemprop="name">函数式编程</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme-%E4%BD%BF%E7%94%A8Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%AE%9E%E7%8E%B0%E6%8E%92%E5%88%97%E5%92%8C%E7%BB%84%E5%90%88%E7%AE%97%E6%B3%95/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="计算机/函数式编程/Scheme-使用Lambda表达式实现排列和组合算法/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在Scheme定义一个函数，通常写法如下：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sum</span> x y)</span><br><span class="line">  (<span class="name"><span class="builtin-name">+</span></span> x y))</span><br></pre></td></tr></table></figure>
<p>还有一种类似于定义变量的方式：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> sum (<span class="name"><span class="builtin-name">lambda</span></span> (x y)</span><br><span class="line">  (<span class="name"><span class="builtin-name">+</span></span> x y)))</span><br></pre></td></tr></table></figure>
<p>利用lambda表达式，把sum和一个匿名函数联系在一起。<br>这种方式有点类似于JS：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="function"><span class="keyword">function</span>(<span class="params">x, y</span>) </span>&#123; <span class="keyword">return</span> x + y; &#125;</span><br></pre></td></tr></table></figure>

<p>利用lambda表达式，能够简化代码，下面举一个简单的例子。</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">translate</span> point delta)</span><br><span class="line">  (<span class="name"><span class="builtin-name">define</span></span> (<span class="name">shift-by</span> x)</span><br><span class="line">    (<span class="name"><span class="builtin-name">+</span></span> x delta))</span><br><span class="line">  (<span class="name"><span class="builtin-name">map</span></span> shift-by point))</span><br></pre></td></tr></table></figure>

<p>修改后：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">translate</span> point delta)</span><br><span class="line">  (<span class="name"><span class="builtin-name">map</span></span> (<span class="name"><span class="builtin-name">lambda</span></span> (x)</span><br><span class="line">         (<span class="name"><span class="builtin-name">+</span></span> x delta))</span><br><span class="line">       point))</span><br></pre></td></tr></table></figure>
<p>很显然，第二种更简洁直观。</p>
<p>Scheme还内置了let关键字，给人的感觉是创建了变量，其实不然，只是把某个表达式给了个名字罢了。<br>(let ((x exp1) (y exp2) (z exp3)) (fn x y z))<br>等价于<br>((lambda (x y z) (fn x y z)) exp1 exp2 exp3)<br>需要注意的是，let里面是个list，不保证求值顺序，所以exp3里面不能使用x和y。</p>
<p>好了，现在开始实现一个方法，返回集合的所有子集。</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">ps</span> set)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">null?</span></span> set) &#x27;(())</span><br><span class="line">      (<span class="name"><span class="builtin-name">let</span></span> ((<span class="name">ps-rest</span> (<span class="name">ps</span> (<span class="name"><span class="builtin-name">cdr</span></span> set))))</span><br><span class="line">        (<span class="name"><span class="builtin-name">append</span></span> ps-rest</span><br><span class="line">                (<span class="name"><span class="builtin-name">map</span></span> (<span class="name"><span class="builtin-name">lambda</span></span> (subset)</span><br><span class="line">                       (<span class="name"><span class="builtin-name">cons</span></span> (<span class="name"><span class="builtin-name">car</span></span> set) subset))</span><br><span class="line">                     ps-rest)))))</span><br></pre></td></tr></table></figure>
<p>现在解释一下整个方法的思路：首先，如果set为空，返回一个由空列表组成的列表；下面运用递归的思想，定义ps-rest是set排除第一个元素的集合的所有子集，比如传入的set是’(1 2 3)，排除第一个元素就是’(2 3)，它的所有子集组成的列表是’(() (3) (2) (2 3))，列表里面共四个元素，这就是ps-rest。我们往ps-rest里面append包含第一个元素1的集合。具体append什么呢？我们mapps-rest，在每一项前面加上第一个元素1，ps-rest第一项是空集，连接完之后是(1)，append到ps-rest里面，第二项是(3)，连接完之后是(1 3)，放到ps-rest里面，第三项第四项类似。最终，我们就得到了结果’(() (3) (2) (2 3) (1) (1 3) (1 2) (1 2 3))。</p>
<p>下面实现算法相对更复杂的全排列。</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">permute</span> items)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">null?</span></span> items) &#x27;(())</span><br><span class="line">      (<span class="name"><span class="builtin-name">apply</span></span> append</span><br><span class="line">             (<span class="name"><span class="builtin-name">map</span></span> (<span class="name"><span class="builtin-name">lambda</span></span> (ele)</span><br><span class="line">                    (<span class="name"><span class="builtin-name">map</span></span> (<span class="name"><span class="builtin-name">lambda</span></span> (pers)</span><br><span class="line">                           (<span class="name"><span class="builtin-name">cons</span></span> ele pers))</span><br><span class="line">                         (<span class="name">permute</span> (<span class="name">remove</span> ele items))))</span><br><span class="line">                  items))))</span><br></pre></td></tr></table></figure>
<p>解释下算法。从apply开始说吧。我们把一系列结果append起来，也就是把后面map里面的求值结果串起来。map的求值结果是什么呢？它遍历了输入的items，比如我们输入’(1 2 3)，第一次遍历使用的是1，也就是向map的第一个参数lambda表达式传入了1，也就是ele是1。接着，对1做了什么呢？又是一个map，遍历了(permute (remove ele items))，remove是从items中移出ele，这个表达式求值结果是’((2 3) (3 2))，遍历它，把1加到每项的前面，得到的结果是’((1 2 3) (1 3 2))。至此，第一次遍历完成，回到外层的map，开始第二次遍历，传入ele为2，后续就不再赘述了。最终得到的结果是’((1 2 3) (1 3 2) (2 1 3) (2 3 1) (3 1 2) (3 2 1))。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme%E6%9D%82%E8%B0%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme%E6%9D%82%E8%B0%88/" class="post-title-link" itemprop="url">Scheme杂谈</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-28 17:12:06" itemprop="dateCreated datePublished" datetime="2015-07-28T17:12:06+08:00">2015-07-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" itemprop="url" rel="index">
                    <span itemprop="name">计算机</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index">
                    <span itemprop="name">函数式编程</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/Scheme%E6%9D%82%E8%B0%88/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="计算机/函数式编程/Scheme杂谈/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>假设有这样一个需求，我们需要对列表里面的每个数字都加倍，一种可能的操作是使用car cdr遍历递归，但是Scheme还提供了map这个内置函数，能够简洁快捷的实现。<br>先来看看这个函数：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; (<span class="name"><span class="builtin-name">map</span></span> + &#x27;(<span class="number">1</span> <span class="number">2</span>) &#x27;(<span class="number">3</span> <span class="number">4</span>) &#x27;(<span class="number">5</span> <span class="number">6</span>))</span><br><span class="line">&#x27;(<span class="number">9</span> <span class="number">12</span>)</span><br></pre></td></tr></table></figure>
<p>map的作用就是遍历每一个列表，然后用第一个参数来对它们进行求值。比如上例，后续的参数是长度为2的列表，那么结果也是一个长度为2的列表，第一项就是把后面每个列表的第一项拿出来，使用+来就行求值，得到了9，类似的，第二项是12。</p>
<p>为了使数字加倍，我们需要定义一个double函数：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">double</span> x) (<span class="name"><span class="builtin-name">*</span></span> x <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<p>使用map和double得到我们的目的：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; (<span class="name"><span class="builtin-name">map</span></span> double &#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>))</span><br><span class="line">&#x27;(<span class="number">2</span> <span class="number">4</span> <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>再介绍两个内置函数apply和eval，关键字就表示出它们的作用：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt; (<span class="name"><span class="builtin-name">apply</span></span> + &#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span>))</span><br><span class="line"><span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt; &#x27;(+ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>)</span><br><span class="line">&#x27;(+ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>)</span><br><span class="line">&gt; (<span class="name"><span class="builtin-name">eval</span></span> &#x27;(+ <span class="number">1</span> <span class="number">2</span> <span class="number">3</span>))</span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure>
<p>来个简单的示例看看它们的应用：</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">average</span> num-list)</span><br><span class="line">  (<span class="name"><span class="builtin-name">/</span></span> (<span class="name"><span class="builtin-name">apply</span></span> + num-list)</span><br><span class="line">     (<span class="name"><span class="builtin-name">length</span></span> num-list)))</span><br></pre></td></tr></table></figure>
<p>从上面几个例子，我们可以看出，使用apply map使得（至少看起来是的）所有元素平等的共同参与运算，而且，比使用car cdr递归更加直观，简洁。<br>那什么时候用eval，按照js经验，可能会有不能用apply的时候，比如define or and这些时候，就只能用eval了。</p>
<p>最后，我们看一个稍微复杂的例子。实现内置函数flatten：<br>flatten作用使得列表里面的元素展开，使之平级，都是最外层列表的元素。比如((1 2) 3)flatten之后就是(1 2 3)。<br>思路是，如果seq（传入的列表）不是一个列表，就返回一个空列表；否则，我们使用map函数，对seq中的每一个子列表进行flatten操作，最后，使用append把这些结果连接起来。</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">my-flatten</span> seq)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">not</span></span> (<span class="name"><span class="builtin-name">list?</span></span> seq)) (<span class="name"><span class="builtin-name">list</span></span> seq)</span><br><span class="line">      (<span class="name"><span class="builtin-name">apply</span></span> append</span><br><span class="line">             (<span class="name"><span class="builtin-name">map</span></span> my-flatten seq))))</span><br><span class="line"></span><br><span class="line">&gt; (<span class="name">my-flatten</span> &#x27;((<span class="number">1</span> <span class="number">2</span>) (<span class="number">3</span> ((<span class="number">4</span>) <span class="number">5</span>)) <span class="number">6</span>))</span><br><span class="line">&#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span>)</span><br></pre></td></tr></table></figure>
<p>最后这个例子稍稍复杂了点，综合应用了apply map和递归的思想。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/%E7%A5%9E%E5%A5%87%E7%9A%84Scheme%E4%B9%8B%E5%BC%BA%E5%A4%A7%E7%9A%84%E9%80%92%E5%BD%92%E6%80%9D%E6%83%B3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/%E7%A5%9E%E5%A5%87%E7%9A%84Scheme%E4%B9%8B%E5%BC%BA%E5%A4%A7%E7%9A%84%E9%80%92%E5%BD%92%E6%80%9D%E6%83%B3/" class="post-title-link" itemprop="url">神奇的Scheme之强大的递归思想</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-20 16:51:21" itemprop="dateCreated datePublished" datetime="2015-07-20T16:51:21+08:00">2015-07-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/" itemprop="url" rel="index">
                    <span itemprop="name">计算机</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" itemprop="url" rel="index">
                    <span itemprop="name">函数式编程</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/%E7%A5%9E%E5%A5%87%E7%9A%84Scheme%E4%B9%8B%E5%BC%BA%E5%A4%A7%E7%9A%84%E9%80%92%E5%BD%92%E6%80%9D%E6%83%B3/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="计算机/函数式编程/神奇的Scheme之强大的递归思想/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在写递归函数之前，先简单介绍几个后续会用到的内置函数：<br>car 返回列表的第一个元素，列表不能是空’()<br>(car ‘(1 2 3))<br>1<br>(car ‘((1 2) 3))<br>‘(1 2)</p>
<p>cdr 返回一个列表但不包含第一个元素，同样，列表不能为空’()<br>(cdr ‘(1 2 3))<br>‘(2 3)<br>(cdr ‘((1 2) (2 3) 4))<br>‘((2 3) 4)</p>
<p>car和cdr可以组合使用，比如cadr表示从不包含第一个元素的列表中返回第一个，即返回第二个元素<br>(cadr ‘(1 (2 3) (3) 4))<br>‘(2 3)<br>为什么可以组合用呢？Scheme的内存模型决定了这一点，以后再详解。</p>
<p>cons 把第一个参数（可以是列表）作为第二个参数的第一个元素，并返回<br>(cons ‘(1) ‘(2 3))<br>‘((1) 2 3)</p>
<p>append 把后续的参数加到第一个参数列表后面<br>(append ‘(1) ‘((2 3) 4))<br>‘(1 (2 3) 4)</p>
<p>有了以上铺垫开始写第一个简单的函数，求和:</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sum-of</span> num-list)</span><br><span class="line">  (<span class="name"><span class="builtin-name">if</span></span> (<span class="name"><span class="builtin-name">null?</span></span> num-list) <span class="number">0</span></span><br><span class="line">      (<span class="name"><span class="builtin-name">+</span></span> (<span class="name"><span class="builtin-name">car</span></span> num-list)</span><br><span class="line">         (<span class="name">sum-of</span> (<span class="name"><span class="builtin-name">cdr</span></span> num-list)))))</span><br></pre></td></tr></table></figure>
<p>如果传入的list是null，求值结果是0，否则，求值结果是list第一项加上其余项之和。<br>(sum-of ‘(1 2 3 4 5))<br>求值结果是15</p>
<p>再来个求list是否排序的通用函数</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="builtin-name">define</span></span> (<span class="name">sorted?</span> list cmp)</span><br><span class="line">  (<span class="name"><span class="builtin-name">or</span></span> (<span class="name"><span class="builtin-name">&lt;</span></span> (<span class="name"><span class="builtin-name">length</span></span> list) <span class="number">2</span>)</span><br><span class="line">      (<span class="name"><span class="builtin-name">and</span></span> (<span class="name">cmp</span> (<span class="name"><span class="builtin-name">car</span></span> list)</span><br><span class="line">                (<span class="name"><span class="builtin-name">cadr</span></span> list))</span><br><span class="line">           (<span class="name">sorted?</span> (<span class="name"><span class="builtin-name">cdr</span></span> list) cmp))))</span><br></pre></td></tr></table></figure>
<p>这个函数稍稍复杂一点。<br>如果说长度小于2，也就是1或者0，那么就是有序的，求值为真；<br>否则，比较一下第一个和第二个是否有序，如果有的话，递归地求剩余长度为n-1的list是否有序。<br>这里利用了逻辑运算的短路特性。</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name">sorted?</span> &#x27;(<span class="number">1</span> <span class="number">2</span> <span class="number">46</span> <span class="number">7</span>) &lt;)</span><br><span class="line">#f</span><br><span class="line">(<span class="name">sorted?</span> &#x27;(<span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span> <span class="string">&quot;e&quot;</span>) string&lt;?)</span><br><span class="line">#t</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E6%96%AF%E5%9D%A6%E7%A6%8F%E5%A4%A7%E5%AD%A6%E5%85%AC%E5%BC%80%E8%AF%BE%EF%BC%9A%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F-%E5%AD%A6%E5%AE%8C%E6%80%BB%E7%BB%93%E4%B8%8B%E4%BD%93%E4%BC%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E6%96%AF%E5%9D%A6%E7%A6%8F%E5%A4%A7%E5%AD%A6%E5%85%AC%E5%BC%80%E8%AF%BE%EF%BC%9A%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F-%E5%AD%A6%E5%AE%8C%E6%80%BB%E7%BB%93%E4%B8%8B%E4%BD%93%E4%BC%9A/" class="post-title-link" itemprop="url">斯坦福大学公开课：编程范式 | 学完总结下体会</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-17 16:15:12" itemprop="dateCreated datePublished" datetime="2015-07-17T16:15:12+08:00">2015-07-17</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%98%85%E8%AF%BB/" itemprop="url" rel="index">
                    <span itemprop="name">阅读</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/" itemprop="url" rel="index">
                    <span itemprop="name">心得</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E6%96%AF%E5%9D%A6%E7%A6%8F%E5%A4%A7%E5%AD%A6%E5%85%AC%E5%BC%80%E8%AF%BE%EF%BC%9A%E7%BC%96%E7%A8%8B%E8%8C%83%E5%BC%8F-%E5%AD%A6%E5%AE%8C%E6%80%BB%E7%BB%93%E4%B8%8B%E4%BD%93%E4%BC%9A/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="阅读/心得/斯坦福大学公开课：编程范式-学完总结下体会/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>陆陆续续的，花了一个多月的时间，在网易公开课上看完了编程范式这门斯坦福的公开课，收益匪浅。公开课地址：<a target="_blank" rel="noopener" href="http://open.163.com/special/opencourse/paradigms.html">http://open.163.com/special/opencourse/paradigms.html</a><br>虽说翻译多多少少有些问题，甚至包括英文字幕，但是瑕不掩瑜，课程本身是极好的。</p>
<p>花了半数的时间，讲了C语言底层的事情，包括内存布局，C-Style“泛型”方法和结构体，类型强转，函数调用，预处理器，编译器，链接器等等，让我对计算机的底层理解又上了一个层次；<br>花了几节课讲了多线程编程范式，由于课程是很久之前的了，只涉及了传统的多线程模型，讲了信号量，互斥，临界区，死锁，同步，生产者-消费者模型，还有哲学家问题等等。好几年过去了，我对计算机的理解俨然比考研时增进了很多，加之这个老师解释的到位，手把手的写代码，很容易就理解了当时考研时不懂的问题，对多线程这块的理解加深的不是一心半点，好赞；<br>几节课时间讲了Scheme这门函数式语言，函数式编程在当今又有再创辉煌的迹象，因为数据的不可变性，对于多线程来说是个天然优势，课程通过写常用的函数，或者实现一些内置的函数，深入的讲解了递归思想，阐述了如何用递归思想去解决问题，而且，让我了解了另外一个编程世界（之前只是听说过函数式编程而没有实践过）。<br>最后，还简单的介绍了Python和Haskell，前者是动态语言，后者是后起的函数式语言，介绍了它们和其他语言的异同，有对比，才有直观的感受，更容易让人理解。</p>
<p>除了学习到计算机知识本身，通过课程，也让我明白世界一流高校和我国高校的差距，没能力上清华北大，准确地说，是斯坦福和北邮的对比。<br>先说说老师，会多门编程语言，实现各种库函数得心应手，我不知道我校有多少老师能做到这个，应该还是有的，只是不多罢了；<br>更重要的是，全程几乎都是黑板粉笔板书，这才是最容易让人接受、跟着老师思路学习的方式，而不是一页页PPT的翻过去而不管学生到底能吸收多少，在我大学期间，见过三个老师全程板书，高数老师胡细宝老师，力学老师朱洪波老师，电动力学田贵花老师，本人脑子笨，学艺不精，但还是能懂得多数内容的，而那种直接放PPT的，实在是非我所能及啊。</p>
<p>再来说说学生。通常来说，好老师和好学生是相互映衬的，特别是好学生更重要，谁成就了清华北大，是那些各个省的拔尖人才啊。斯坦福大学的学生，毋庸置疑，北美（可能还有中印人才）最好的学生了，从上课可以看出，有些人提的问题是很有想法的，当然，也有些问题或者想法挺简单幼稚的，不过我都研究生毕业又工作2年多了，人家才大学二年级。<br>从公开课页面可以下载相关的讲义和作业，作业不能说很困难，但是每一次作业都很费时费力，要写代码，要求严格，特别是Scheme讲完居然要学生实现简单的解释器，逆天啊，老师仅仅讲了下内存分布之类的原理性内容，就要求这么高，实打实的培养工程能力。再反观国内，很多人大四毕业，也写不出个像样的小程序。</p>
<p>最后简单说说课程设置。他们一学期几门课，我们十几门课，我们还没有人家累。一个学期十来门课程，还要上些马哲毛概之类的没什么卵用的课程，能有多少时间精力去搞真正专业的东西呢？听课中，感觉他们除了上课，还有专门的讨论时间，老师或者助教也会去参与，我上课期间，基本就是老师来了讲课，我们听着，下课做作业，一般也就期末前能有一次或者两次答疑，更关键的是，我们教师学生比小的可怜，几百人就指望着一个老师，各种维度考量下来，我们能分到的资源少的可怜，没有讨论，没有和老师的切磋，自己瞎折腾，进步势必要慢一些。</p>
<p>国外发展了数百年到了发达国家，我们不到百年，相对底子弱些，只能自己加倍努力了。说到努力，比起国外顶尖的人，我这智商不足就算了，努力程度也不及啊，真替自己捉急。<br>一步一个脚印，慢慢进步，会通向彼岸的。</p>
<p>最后的最后，感谢Jerry Cain带来的精彩课程！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://guozi149.me/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E5%9C%B0%E5%BF%83%E6%B8%B8%E8%AE%B0-%E8%AF%BB%E5%90%8E%E6%84%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/300+300.png">
      <meta itemprop="name" content="Leo SHEN">
      <meta itemprop="description" content="记录点什么帮助自己进步，如果能帮助别人，手有余香">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="guozi">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E5%9C%B0%E5%BF%83%E6%B8%B8%E8%AE%B0-%E8%AF%BB%E5%90%8E%E6%84%9F/" class="post-title-link" itemprop="url">地心游记 | 读后感</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2015-07-16 16:09:28" itemprop="dateCreated datePublished" datetime="2015-07-16T16:09:28+08:00">2015-07-16</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%98%85%E8%AF%BB/" itemprop="url" rel="index">
                    <span itemprop="name">阅读</span>
                  </a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/" itemprop="url" rel="index">
                    <span itemprop="name">心得</span>
                  </a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus：</span>
    
    <a title="disqus" href="/%E9%98%85%E8%AF%BB/%E5%BF%83%E5%BE%97/%E5%9C%B0%E5%BF%83%E6%B8%B8%E8%AE%B0-%E8%AF%BB%E5%90%8E%E6%84%9F/#comments" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="阅读/心得/地心游记-读后感/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一本小说，科幻小说。为何买此书呢？一是听说过此书大名，二是京东满减凑单。花了三到四个下午就看完了此书。</p>
<p>摘抄几段译者序以做回顾，再说说自己的看法。</p>
<p>凡尔纳自幼喜欢旅游和航海，酷爱科学和幻想。他生活的年代，是资本主义上升的时代，也是科学技术飞速发展的时代。他的作品既是那个时代的产物，又是那个时代的一面镜子，表达了人们对摆脱手工式小生产、实现资本主义大生产的渴望，也反应出科学技术的发展在人们的思想领域产生的巨大影响。</p>
<p>虽然《地心游记》是一部充满传奇色彩的科幻小说，但它的诞生是和当时的历史、社会背景分不开的。一方面，欧洲殖民者出于建立各自殖民帝国的目的，掀起了一股探险狂热，在短短的时间里，他们相继征服了尼罗河的源头、撒哈拉沙漠、非洲大陆、南北两极，地球上人迹未至之处越来越少。另一方面，科学技术，特别是考古学和地质学得到了前所未有的发展。《地心游记》就是在这样的背景下应运而生的。</p>
<p>在小说中，凡尔纳不仅向人们讲述了一个科幻故事，而且以自己独特的方式，表明了他在一场贯穿整个十九世纪的重大科学争论中所持的立场。众所周知，当时的生物界在对于世界的看法上存在着两种截然不同的观点，一种是生物不变论，一种是生物进化论。尽管当时很多考古学的最新发现遭到了不变论鼓吹者的污蔑、打击和诽谤，但是凡尔纳仍然勇敢地把这些发现写进了他的《地心游记》里，为读者描绘了一副生物演化过程图，有力地传播了真理，支持了科学。</p>
<p>这本书对于我来说，有一个好处，出场人物少，主要刻画了我（主人公）、地质学家的叔叔和一个向导，主要篇幅都是说的这三个人的事。其他也就几个人物了，比如我喜欢的格劳本，家里的女仆。</p>
<p>我在探险的路上遇到很多很多问题，想回去，回到温暖的家，迷路，和叔叔仆人走散，而后昏厥，命悬一线，幸好有主角光环得以和叔叔相见而活下来。途中，时常想起家中的格劳本，当然，最后，他俩过上了幸福的生活。<br>半道上，我质疑了本书最大的疑点，当年写下纸条的人，又没有现在人的科技，没有压力计，凭什么知道自己是到了地心呢？</p>
<p>书中最引人入胜的一段描写是地心处有个海，岸上有很多很多史前生物物，海里有很多很多史生物物，还各种大战，电闪雷鸣啊，拍出能比前些天上映的《侏罗纪世界》更精彩。我和叔叔凭着主角光环，活下来了。不得不说，作者真是脑洞打开。<br>其实，作者描写这段主要是表明自己的立场：支持生物进化论。</p>
<p>在他们从地表往地心走的时候，记录了地球各个时期岩石、地层的变化，说明了作者那个时代，科学就挺发达的，而且，也表明作者绝对是喜欢科学的人啊。</p>
<p>在我看来，书中有个bug，就是到了地底下用的那个灯，感觉一直能在照明，一直在照明，我就想知道那是什么电池，或者能量设备，太tmd的牛逼了。</p>
<p>书中还表达了及其重要的一个观点：<br>科学，就是要有探索精神，敢于试错，从错误中吸取经验，不断的积累经验，修正当前的知识，最终接近真理。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Leo SHEN"
      src="/images/300+300.png">
  <p class="site-author-name" itemprop="name">Leo SHEN</p>
  <div class="site-description" itemprop="description">记录点什么帮助自己进步，如果能帮助别人，手有余香</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">196</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">89</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/shenlei149" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shenlei149" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leo SHEN</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v5.4.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://guozi.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>

</body>
</html>
